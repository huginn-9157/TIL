# Numpy

[【Python入門】Python Numpy チュートリアル](https://avinton.com/academy/python-numpy-tutorial-japanese/)

----

## NUmpyの配列

要素が格子状に並んだ、多次元の配列を（簡単に）作れる

>配列の次元数を`階数 (rank)`と呼び、  
配列の`形状 (shape)`は次元ごとの配列の大きさを整数のタプルで表す

これはネストされたリストで表される

```py
import numpy as np
a = np.array([1, 2, 3])
a
# array([1, 2, 3])
a.shape
# (3,)
print(a)
# [1 2 3]

b = np.array([[1, 2, 3], [9, 27, 81]])
print(b.shape)
# (2, 3)
for i in b:
	print(i)

# [1 2 3]
# [ 9 27 81]
```

### 配列作成メソッド

配列に数字を入れて作成する関数が用意されている

以下のメソッドは引数にshapeを用いる

```
shapeタプルで大きさを表す。
例: (3, 3) = 3行3列の配列
```

- zeros()
  - ゼロ埋め(`0.`)
- ones()
  - `1.`埋め
- full(`shape`, n)
  - `n`埋め
- eye(n)
  - `nxn`次元の[単位行列](https://kotobank.jp/word/%E5%8D%98%E4%BD%8D%E8%A1%8C%E5%88%97-94854)
- arrange()
  - 等差数列を作成する
  - `numpy.arange([start, ]stop, [step, ]dtype = None)`
  ```py
  np.arange(0, 10)
  # array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])
  np.arange(0, 10, 1.5, dtype='float64')
  # array([0. , 1.5, 3. , 4.5, 6. , 7.5, 9. ])
  ```

### 配列のインデックス参照

```py
import numpy as np
 
# 以下の、階数2、形状(3, 4)の配列を作成
# [[ 1 2 3 4]
# [ 5 6 7 8]
# [ 9 10 11 12]]
 
a = np.array([[1,2,3,4], [5,6,7,8], [9,10,11,12]])
 
# スライスを用い、初めの2行と2,3列目を抽出
# bは以下の、形状(2, 2)の配列
# [[2 3]
# [6 7]]
 
b = a[:2, 1:3]
 
# 配列のスライスは元の配列と同じデータを参照するため、
# スライスで作成した配列を変更すると元の配列も同様に変更される
 
print(a[0, 1]) # "2"と表示
 
b[0, 0] = 77 # b[0, 0]はa[0, 1]と同じデータを参照
 
print(a[0, 1]) # "77"と表示
```

インデックス参照はスライスも使える。  

>配列の真ん中の行にあるデータを取り出す方法は二通り用意されている  
整数とスライスを同時に使う場合は階数が下がる  
スライスのみの場合は階数が変わらない

いまいち分かりにくいが、  
参照にスライスを使わないと階層自体がスライスされて取り出されるもよう

```py
a = np.array([[1,2,3,4], [5,6,7,8], [9,10,11,12]])
 
row_r1 = a[1, :] # aの2行目が階数1として取り出される
row_r2 = a[1:2, :] # aの2行目が階数2のまま取り出される
 
print(row_r1, row_r1.shape)
# [5 6 7 8] (4,)
print(row_r2, row_r2.shape)
# [[5 6 7 8]] (1, 4)
```

### ファンシーインデックス参照

配列の参照に配列を使うこと

```py
a = np.array([[1,2,3], [4,5,6], [7,8,9], [10,11,12]])
print(a)
	  
# [[ 1  2  3]
#  [ 4  5  6]
#  [ 7  8  9]
#  [10 11 12]]

b = np.array([0,2,0,1])
print(a[np.arange(4), b]) # bの配列のインデックスでaを取り出す
# [ 1,  6,  7, 11]

# 計算もできる
a[np.arange(4), b] += 10
print(a)
# [[11,  2,  3],
#  [ 4,  5, 16],
#  [17,  8,  9],
#  [10, 21, 12]]
```

### 配列の計算

- 記号で四則演算
- add(x,y), subtract(), multiply(), divide()
- 平方根：sqrt()
- 積は要素ごとの積を出す
  - 行列やベクトルの積はdot()
- np.sum(x, [axis=n])
  - xの要素の総和。nで列を指定しても良い

```py
x = np.array([[1,2],[3,4]])
np.sum(x)
# 10
np.sum(x, axis=0)
# array([4, 6])
```

### ブロードキャスト

行列勉強してから出直し
